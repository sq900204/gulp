<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
<meta name="format-detection" content="telephone=no, email=no" />
<title>华龙区公众平台</title>
<link rel="stylesheet" href="css/normalize.min.css">
<link rel="stylesheet" href="css/index.min.css">
<script type="text/javascript" src="js/flexible.min.js"></script>
</head>
<body style="background:#fef5e8">
    <div class="home-wrapper" id="wrapper">
        <div  id="scroller">
            <div id="pullDown">
                <span class="pullDownIcon"></span><span class="pullDownLabel">下拉刷新</span>
            </div>
            <ul class="banner-list">
                    <!-- 精彩活动 -->
                    <li style="background:url(img/banner1.jpg) no-repeat center;" class="activity">
                        <a href="activity.html">
                            <div class="activity-title">
                                <h3><span>社会主义核心 价值观学习月</span></h3>
                            </div>
                            <p class="time">活动时间：2018.07.10-2018.08.01 </p>
                            <p class="member">参与人次：2628</p>
                        </a>
                    </li>
                    <!-- 固定活动 -->
                    <li class="correct">
                        <a>知识竞答</a>
                    </li>
                    <li class="learn"> 
                        <a >学习园地</a>
                    </li>
                    <li class="old"> 
                        <a href="old.html">
                            往期活动
                        </a>
                    </li>
                </ul>   
        </div>
        
    </div>
    <!-- 敬请期待 -->
    <div class="toast">暂未开放,敬请期待</div>

  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/index.min.js"></script>
  <!-- 下拉刷新 -->
  <!-- <script type="text/javascript" src="http://www.jq22.com/demo/jQuery-iscroll20160405/iscroll.js"></script> -->
  <script type="text/javascript" src="js/iscroll.min.js"></script>
<script type="text/javascript">
var myScroll,pullDownEl, pullDownOffset

// 上拉刷新
function pullDownAction () {
	setTimeout(function () {
        var html = ' <li style="background:url(img/banner1.jpg) no-repeat center;" class="activity">'+
                        '<a href="activity.html">'+
                            '<div class="activity-title">'+
                               '<h3>社会主义核心 价值观学习月</h3>'+
                           '</div>'+
                            '<p class="time">活动时间：2018.07.10-2018.08.01 </p>'+
                            '<p class="member">参与人次：2628</p>'+
                        '</a>'+
                    '</li>'
        $(".banner-list").prepend(html)
		myScroll.refresh()
	}, 1000);
}

function loaded() {
	pullDownEl = document.getElementById('pullDown');
	pullDownOffset = pullDownEl.offsetHeight;
	myScroll = new iScroll('wrapper', {
		useTransition: true,
		topOffset: pullDownOffset,
		onRefresh: function () {
			if (pullDownEl.className.match('loading')) {
				pullDownEl.className = '';
				pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...'}

		},
		onScrollMove: function () {
			if (this.y > 0) {
				pullDownEl.className = 'flip'
				pullDownEl.querySelector('.pullDownLabel').innerHTML = '松手开始更新...'
				this.minScrollY = 0
			}
			if (this.y < 0 && pullDownEl.className.match('flip')) {
				pullDownEl.className = ''
				pullDownEl.querySelector('.pullDownLabel').innerHTML = '下拉刷新...'
				this.minScrollY = -pullDownOffset
			}
		},
		onScrollEnd: function () {
			if (pullDownEl.className.match('flip')) {
				pullDownEl.className = 'loading'
				pullDownEl.querySelector('.pullDownLabel').innerHTML = '加载中...'				
				pullDownAction()
			} 
		}
	})
	setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800);
}
document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);

  </script>
</body>
</html>